Автоматизация HeroWars
----------------------
Бот для игры под android [Hero Wars: Alliance](https://play.google.com/store/apps/details?id=com.nexters.herowars&pcampaignid=web_share).

Быстрый старт
-------------
1. Устанавливаем [AnkuLua Lite](https://ankulua.boards.net/thread/1395/free-ankulua-trial-apk-download).
2. Качаем содержимое данного репозитория себе на телефон в произвольную папку.
3. Запускаем AnkuLua. (Попросит разрешение записи с экрана, нужно чтобы парсить картинку игры).
4. В приложении AnkuLua нажимаем `Select script`. Выбираем основной скрипт приложения: `<путь_до_проекта>/bot/heroWarsBot.lua`
5. Нажимаем `Start service` - появится кнопка запуска скрипта.
6. Запускаем нашу игру Hero Wars: Alliance.
7. Во время игры нажимаем запуск скрипта и выбираем необходимое действие.

Описание работы
---------------
Скрипты автоматизации достаточно глупые: ожидаем, что находимся на определённом экране, ищем по картинке определённую
область и нажимаем на неё (Иногда по координатам).
Реализованы следующие функции:
- `Реклама` - Собирает всю групповую рекламу: Бесплатные коробки, реклама в магазине. Начало: "База", Бесплатные коробки, Магазин "Кинотеатр".
- `Титанит` - Собирает титанит. Начало: "База", "Подземелье". Окончание - завершён этаж (до кнопки "Активировать").
- `Башня` - Проходит башню. Начало: "База", "Башня".
- `Гидра` - Ожидает нажатия на голову гидры, затем нападает на неё 3 раза. Начало: выбор головы гидры.
- `test` - Выполнение тестовых действий (тестовое)
- `Подождать и закрыть AD` - Ждёт завершения рекламы и наживает крестик. Только для реклам на версии Huawei
- `Coords` - Выводит координаты нажатия (тестовое)
- `Закрыть` - Нажимает кнопку "закрыть" (тестовое)
- `запределье-боссы` - Собирает боссов запределья. Первый и второй боссы атакуются по 1 разу, третий босс атакуется 3 раза. 
- `Событие` - Во время события циклически запускает бой. Начало: экран боёв события.
- `Порт` - Проводит бои в "Порт". Начало: "Порт"


Описание функций
----------------
Автоматизации довольно простые. Начинаем на определённом экране, программа ищет определённое изображение или координаты,
тыкает туда, далее ожидает изображение или нажимает на координаты, в зависимости от алгоритма.
Известные проблемы: 
- При сборе титанита иногда заходит в магазин (нажимается кнопка магазина). Обходное решение: закрыть магазин.
- Башня иногда завершается досрочно. Обходное решение: заново запустить скрипт.

Список использованных решений
-----------------------------
- Поставщик решения автоматизации под android: [AnkuLua](https://ankulua.boards.net/thread/181/api-quick-reference).
- Автоматизация поиска и интеракции с приложениями: AnkuLua базируется на [Sikuli](https://sikulix-2014.readthedocs.io/en/latest/index.html)
- Язык: Используют lua-сприпты. См.: https://www.lua.org/pil/